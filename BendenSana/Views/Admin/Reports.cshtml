@model IEnumerable<global::ProductReport>

@{
    ViewData["Title"] = "Şikayet Edilen Ürünler";
    Layout = "~/Views/Shared/_LayoutAdmin.cshtml";
}

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&family=Plus+Jakarta+Sans:wght@700&family=Poppins:wght@600&display=swap" rel="stylesheet">

<div class="container-fluid py-4" style="background-color: #fcfcfc; min-height: 100vh; font-family: 'Inter', sans-serif;">

    <div class="mb-4 d-flex flex-column gap-3">
        <div class="d-flex align-items-center" style="gap: 16px;">
            <div style="width: 20px; height: 40px; background: #DB4444; border-radius: 4px;"></div>
            <span style="font-family: 'Poppins', sans-serif; font-weight: 600; font-size: 16px; color: #DB4444;">Featured</span>
        </div>
        <h1 class="fw-bold" style="font-size: 36px; color: #000000; letter-spacing: 1.44px;">Sikayet Edilen Urunler</h1>
    </div>

    <div class="card border-0 shadow-sm overflow-hidden" style="border-radius: 20px; box-shadow: 0px 0px 0px 0.5px rgba(0, 0, 0, 0.03) !important;">

        <div class="p-3 border-bottom d-flex align-items-center gap-3">
            <div class="input-group" style="max-width: 400px;">
                <span class="input-group-text bg-transparent border-0"><i class="bi bi-search text-muted"></i></span>
                <input type="text" class="form-control border-0 shadow-none" placeholder="Search by product name" style="font-size: 14px;">
            </div>
            <div class="vr mx-2" style="height: 24px;"></div>
            <button class="btn btn-link text-dark fw-bold text-decoration-none p-0 d-flex align-items-center gap-1" style="font-size: 14px;">
                Category <i class="bi bi-chevron-down small"></i>
            </button>
            <button class="btn btn-link text-dark fw-bold text-decoration-none p-0 d-flex align-items-center gap-1" style="font-size: 14px;">
                Gender <i class="bi bi-chevron-down small"></i>
            </button>
        </div>

        <div class="table-responsive">
            <table class="table align-middle mb-0">
                <thead class="bg-light">
                    <tr style="font-size: 12px; color: #2F3746; text-transform: uppercase; letter-spacing: 0.5px;">
                        <th class="ps-4" style="width: 50px;"></th>
                        <th>Name</th>
                        <th>Price</th>
                        <th>Kategori</th>
                        <th>Gender</th>
                        <th class="text-center">Action</th>
                        <th class="pe-4"></th>
                    </tr>
                </thead>
                <tbody>
                    @foreach (var report in Model)
                    {
                        <tr style="height: 110px; border-bottom: 1.11px solid #F2F4F7;">
                            <td class="ps-4">
                                <i class="bi bi-chevron-right text-muted" style="cursor: pointer;"></i>
                            </td>
                            <td>
                                <div class="d-flex align-items-center gap-3">
                                    @{
                                        // Ürünün ilk resmini alıyoruz, yoksa placeholder
                                        var coverImg = report.Product?.Images?.FirstOrDefault()?.ImageUrl ?? "https://placehold.co/80x80";
                                    }
                                    <img src="@coverImg" style="width: 80px; height: 80px; object-fit: cover; border-radius: 8px; background: #F8F9FA;">
                                    <div class="d-flex flex-column">
                                        <span style="color: #111927; font-weight: 500; font-size: 14px;">@report.Product?.Title</span>
                                        <span style="color: #6C737F; font-weight: 400; font-size: 14px;">in @report.Product?.Category?.Name</span>
                                    </div>
                                </div>
                            </td>
                            <td style="color: #111927; font-size: 14px;">
                                @(report.Product?.Price.ToString("C") ?? "$0.00")
                            </td>
                            <td style="color: #111927; font-size: 14px;">
                                @report.Reason
                            </td>
                            <td style="color: #111927; font-size: 14px; text-transform: lowercase;">
                                @(report.Product?.Gender?.ToString() ?? "unisex")
                            </td>
                            <td class="text-center">
                                <div class="d-flex justify-content-center gap-2">
                                    <a asp-controller="Product" asp-action="Details" asp-route-id="@report.ProductId"
                                       class="btn btn-white border rounded-2 d-flex align-items-center justify-content-center shadow-sm"
                                       style="width: 40px; height: 40px; border-color: #CED4DA !important;" title="Ürünü Gör">
                                        <i class="bi bi-box-arrow-up-right" style="font-size: 14px;"></i>
                                    </a>

                                    <form asp-action="DismissReport" asp-route-id="@report.Id" method="post" class="d-inline">
                                        <button type="submit" class="btn btn-white border rounded-2 d-flex align-items-center justify-content-center shadow-sm"
                                                style="width: 40px; height: 40px; border-color: #CED4DA !important;" title="Şikayeti Kaldır">
                                            <i class="bi bi-trash" style="font-size: 16px;"></i>
                                        </button>
                                    </form>
                                </div>
                            </td>
                            <td class="pe-4 text-end">
                                <div style="width: 16px; height: 2px; background: #6C737F; display: inline-block; border-radius: 1px;"></div>
                            </td>
                        </tr>
                    }
                </tbody>
            </table>
        </div>

        <div class="p-3 border-top d-flex justify-content-end align-items-center gap-4" style="color: #111927; font-size: 14px;">
            <span>Rows per page:</span>
            <div class="d-flex align-items-center gap-1" style="cursor: pointer;">
                5 <i class="bi bi-caret-down-fill small text-muted"></i>
            </div>
            <span>1-5 of @Model.Count()</span>
            <div class="d-flex gap-4">
                <i class="bi bi-chevron-left text-muted" style="cursor: not-allowed;"></i>
                <i class="bi bi-chevron-right" style="cursor: pointer;"></i>
            </div>
        </div>
    </div>
</div>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.0/font/bootstrap-icons.css">